-- ğŸ‘‰ å…ˆæŠŠè¿™é‡Œæ›¿æ¢æˆä½ åœ¨ Auth â†’ Users é‡Œçœ‹åˆ°çš„æŸä¸ªç”¨æˆ· id
--    ä¾‹å¦‚ 'b3f0a4d5-1234-5678-9abc-0123456789ab'
--
--    å¦‚æœå·²ç»æœ‰ profiles è®°å½•ï¼Œè¿™æ¡ä¼š on conflict ä¸æŠ¥é”™
insert into public.profiles(id, display_name, role)
values ('c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid, 'Test Teacher', 'teacher')
on conflict (id) do nothing;

------------------------------------------------------------
-- 1. æ’å…¥å‡ é“æµ‹è¯•é¢˜ï¼ˆcardsï¼‰
------------------------------------------------------------

insert into public.cards(id, owner_id, front, back, card_type, explanation, meta)
values
  ('11111111-1111-1111-1111-111111111111'::uuid, 'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
   'å£°éŸ³æ˜¯ç”±ä»€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ',
   'å£°éŸ³æ˜¯ç”±ç‰©ä½“æŒ¯åŠ¨äº§ç”Ÿçš„ã€‚',
   'basic',
   'åˆä¸­ç‰©ç†å¿…èƒŒç»“è®ºï¼šå£°éŸ³æ¥è‡ªæŒ¯åŠ¨ã€‚',
   null),

  ('22222222-2222-2222-2222-222222222222'::uuid, 'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
   'å£°éŸ³åœ¨ä»€ä¹ˆç¯å¢ƒä¸­ä¸èƒ½ä¼ æ’­ï¼Ÿ',
   'åœ¨çœŸç©ºä¸­ä¸èƒ½ä¼ æ’­ã€‚',
   'single_choice',
   'çœŸç©ºæ³µå®éªŒï¼šæŠ½ç©ºåå¬ä¸åˆ°é“ƒå£°ã€‚',
   jsonb_build_object(
     'options', array['ç©ºæ°”ä¸­','æ°´ä¸­','å›ºä½“ä¸­','çœŸç©ºä¸­'],
     'correct_index', 3
   )),

  ('33333333-3333-3333-3333-333333333333'::uuid, 'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
   'å½±å“éŸ³è°ƒé«˜ä½çš„ä¸»è¦ç‰©ç†é‡æ˜¯ä»€ä¹ˆï¼Ÿ',
   'é¢‘ç‡ï¼Œé¢‘ç‡è¶Šå¤§éŸ³è°ƒè¶Šé«˜ã€‚',
   'basic',
   'éŸ³è°ƒ â†” æŒ¯åŠ¨é¢‘ç‡ã€‚',
   null),

  ('44444444-4444-4444-4444-444444444444'::uuid, 'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
   'åˆ¤æ–­å¯¹é”™ï¼šæŒ¯å¹…è¶Šå¤§ï¼Œå£°éŸ³è¶Šå“ã€‚',
   'å¯¹ã€‚',
   'basic',
   'å“åº¦ä¸»è¦ä¸æŒ¯å¹…æœ‰å…³ã€‚',
   null),

  ('55555555-5555-5555-5555-555555555555'::uuid, 'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
   'ç”Ÿæ´»ä¸­å‡å°å™ªå£°çš„æ–¹æ³•ä¸åŒ…æ‹¬ä¸‹åˆ—å“ªä¸€é¡¹ï¼Ÿ',
   'åœ¨æ•™å®¤é‡Œå¤§å£°è¯´è¯ã€‚',
   'single_choice',
   'æ§åˆ¶å£°æºã€ä¼ æ’­é€”å¾„æˆ–æ¥æ”¶å¤„éƒ½å¯ä»¥å‡å°å™ªå£°ï¼Œé€‰é¡¹ä¸­åªæœ‰â€œå¤§å£°è¯´è¯â€æ˜¯ç›¸åæ“ä½œã€‚',
   jsonb_build_object(
     'options', array['åœ¨é©¬è·¯è¾¹å®‰è£…éš”éŸ³å¢™','æˆ´ä¸Šé˜²å™ªè€³å¡','åœ¨æ•™å®¤é‡Œå¤§å£°è¯´è¯','ç»™æœºå™¨åŠ è£…æ¶ˆéŸ³ç½©'],
     'correct_index', 2
   ));

------------------------------------------------------------
-- 2. æ’å…¥ä¸€ä¸ªæµ‹è¯•ç”¨é¢˜åº“ï¼ˆdecksï¼‰
--    items å­—æ®µé‡Œç›´æ¥å†™ card_id åˆ—è¡¨
------------------------------------------------------------

insert into public.decks(
  id, owner_id, title, description, subject, grade, tags, is_public, items
) values (
  'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'::uuid,
  'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
  'åˆäºŒç‰©ç† Â· å£°ç°è±¡ Â· é—ªå¡ç¤ºä¾‹',
  'ç”¨äºæµ‹è¯• React + Supabase é—ªå¡ç»ƒä¹ çš„ç¤ºä¾‹é¢˜åº“ã€‚',
  'ç‰©ç†',
  'å…«å¹´çº§',
  array['å£°ç°è±¡','æµ‹è¯•'],
  true,
  '{
    "items": [
      { "card_id": "11111111-1111-1111-1111-111111111111", "order": 1 },
      { "card_id": "22222222-2222-2222-2222-222222222222", "order": 2 },
      { "card_id": "33333333-3333-3333-3333-333333333333", "order": 3 },
      { "card_id": "44444444-4444-4444-4444-444444444444", "order": 4 },
      { "card_id": "55555555-5555-5555-5555-555555555555", "order": 5 }
    ]
  }'::jsonb
);

------------------------------------------------------------
-- 3. æ’å…¥ä¸€å¼ è¯•å·æ¨¡æ¿ï¼ˆquiz_templatesï¼‰
------------------------------------------------------------

insert into public.quiz_templates(
  id, owner_id, title, description, related_deck_id, mode, items, config
) values (
  'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb'::uuid,
  'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
  'å£°ç°è±¡å°æµ‹ï¼ˆç¤ºä¾‹å·ï¼‰',
  'åŒ…å« 5 é“åŸºç¡€é¢˜ï¼Œç”¨äºæµ‹è¯•æµ‹éªŒæµç¨‹ã€‚',
  'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'::uuid,  -- å…³è”ä¸Šé¢çš„é¢˜åº“
  'mixed',
  '{
    "items": [
      { "card_id": "11111111-1111-1111-1111-111111111111", "position": 1, "score": 2 },
      { "card_id": "22222222-2222-2222-2222-222222222222", "position": 2, "score": 2 },
      { "card_id": "33333333-3333-3333-3333-333333333333", "position": 3, "score": 2 },
      { "card_id": "44444444-4444-4444-4444-444444444444", "position": 4, "score": 2 },
      { "card_id": "55555555-5555-5555-5555-555555555555", "position": 5, "score": 2 }
    ]
  }'::jsonb,
  jsonb_build_object('total_score', 10, 'source', 'test_seed')
);

------------------------------------------------------------
-- 4. æ’å…¥ä¸€æ¡æµ‹è¯•æµ‹éªŒè®°å½•ï¼ˆquizzes + quiz_itemsï¼‰
--    æ¨¡æ‹Ÿè¿™ä¸ªç”¨æˆ·åšäº†ä¸€æ¬¡è¯•å·ï¼Œç­”å¯¹ 4 é¢˜ã€é”™ 1 é¢˜
------------------------------------------------------------

-- quizzes
insert into public.quizzes(
  id, template_id, user_id, started_at, finished_at,
  score, total_items, correct_items, config
) values (
  'cccccccc-cccc-cccc-cccc-cccccccccccc'::uuid,
  'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb'::uuid,
  'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
  now() - interval '10 minutes',
  now(),
  8.0,              -- 10 åˆ†æ»¡åˆ†ï¼Œç­”å¯¹ 4 é¢˜
  5,
  4,
  jsonb_build_object('mode', 'mixed', 'seed', 'test_run_1')
);

-- quiz_items
insert into public.quiz_items(
  id, quiz_id, card_id, position,
  user_answer, is_correct,
  question_snapshot, correct_answer_snapshot, meta
) values
(
  'd1111111-1111-1111-1111-111111111111'::uuid,
  'cccccccc-cccc-cccc-cccc-cccccccccccc'::uuid,
  '11111111-1111-1111-1111-111111111111'::uuid,
  1,
  'å£°éŸ³æ˜¯ç”±ç‰©ä½“æŒ¯åŠ¨äº§ç”Ÿçš„ã€‚',
  true,
  'å£°éŸ³æ˜¯ç”±ä»€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ',
  'å£°éŸ³æ˜¯ç”±ç‰©ä½“æŒ¯åŠ¨äº§ç”Ÿçš„ã€‚',
  null
),
(
  'd2222222-2222-2222-2222-222222222222'::uuid,
  'cccccccc-cccc-cccc-cccc-cccccccccccc'::uuid,
  '22222222-2222-2222-2222-222222222222'::uuid,
  2,
  'çœŸç©ºä¸­',
  true,
  'å£°éŸ³åœ¨ä»€ä¹ˆç¯å¢ƒä¸­ä¸èƒ½ä¼ æ’­ï¼Ÿ',
  'åœ¨çœŸç©ºä¸­ä¸èƒ½ä¼ æ’­ã€‚',
  null
),
(
  'd3333333-3333-3333-3333-333333333333'::uuid,
  'cccccccc-cccc-cccc-cccc-cccccccccccc'::uuid,
  '33333333-3333-3333-3333-333333333333'::uuid,
  3,
  'é¢‘ç‡è¶Šå¤§éŸ³è°ƒè¶Šé«˜ã€‚',
  true,
  'å½±å“éŸ³è°ƒé«˜ä½çš„ä¸»è¦ç‰©ç†é‡æ˜¯ä»€ä¹ˆï¼Ÿ',
  'é¢‘ç‡ï¼Œé¢‘ç‡è¶Šå¤§éŸ³è°ƒè¶Šé«˜ã€‚',
  null
),
(
  'd4444444-4444-4444-4444-444444444444'::uuid,
  'cccccccc-cccc-cccc-cccc-cccccccccccc'::uuid,
  '44444444-4444-4444-4444-444444444444'::uuid,
  4,
  'é”™ã€‚',
  false,
  'åˆ¤æ–­å¯¹é”™ï¼šæŒ¯å¹…è¶Šå¤§ï¼Œå£°éŸ³è¶Šå“ã€‚',
  'å¯¹ã€‚',
  null
),
(
  'd5555555-5555-5555-5555-555555555555'::uuid,
  'cccccccc-cccc-cccc-cccc-cccccccccccc'::uuid,
  '55555555-5555-5555-5555-555555555555'::uuid,
  5,
  'åœ¨æ•™å®¤é‡Œå¤§å£°è¯´è¯ã€‚',
  true,
  'ç”Ÿæ´»ä¸­å‡å°å™ªå£°çš„æ–¹æ³•ä¸åŒ…æ‹¬ä¸‹åˆ—å“ªä¸€é¡¹ï¼Ÿ',
  'åœ¨æ•™å®¤é‡Œå¤§å£°è¯´è¯ã€‚',
  null
);

------------------------------------------------------------
-- 5. å¯é€‰ï¼šæ’å…¥ä¸€æ¡ card_stats / card_reviews ä½œä¸ºæ ·ä¾‹
------------------------------------------------------------

insert into public.card_stats(
  id, user_id, card_id, last_reviewed_at,
  review_count, correct_count, wrong_count, ease_factor, next_due_at
) values (
  gen_random_uuid(),
  'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
  '11111111-1111-1111-1111-111111111111'::uuid,
  now(),
  3, 3, 0,
  2.5,
  now() + interval '1 day'
)
on conflict (user_id, card_id) do nothing;

insert into public.card_reviews(
  id, user_id, card_id, reviewed_at, user_answer, is_correct, time_spent, meta
) values (
  gen_random_uuid(),
  'c3c49b3d-b6c9-4c38-86ad-f73fe07a07c0'::uuid,
  '11111111-1111-1111-1111-111111111111'::uuid,
  now() - interval '1 hour',
  'å£°éŸ³ç”±ç‰©ä½“æŒ¯åŠ¨äº§ç”Ÿ',
  true,
  12,
  jsonb_build_object('source', 'seed_script')
);